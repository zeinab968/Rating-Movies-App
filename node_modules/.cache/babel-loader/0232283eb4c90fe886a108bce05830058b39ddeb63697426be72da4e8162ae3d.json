{"ast":null,"code":"import _objectSpread from\"C:/Users/sham/Desktop/movies-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState,useEffect}from'react';import Header from'./components/Header';import MovieList from'./components/MovieList';import MovieForm from'./components/MovieForm';import{fetchMovies,addMovie,updateMovie,deleteMovie,updateRating}from'./services/movieService';import'./styles/App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[movies,setMovies]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[isFormOpen,setIsFormOpen]=useState(false);const[movieToEdit,setMovieToEdit]=useState(null);useEffect(()=>{loadMovies();},[]);const loadMovies=async()=>{try{setLoading(true);const data=await fetchMovies();setMovies(data);setError(null);}catch(err){setError('Failed to load movies. Please make sure JSON server is running.');}finally{setLoading(false);}};const averageRating=movies.length>0?(movies.reduce((sum,movie)=>sum+movie.rating,0)/movies.length).toFixed(1):0;const handleAddMovie=async movieData=>{try{const newMovie=await addMovie(movieData);setMovies([...movies,newMovie]);setIsFormOpen(false);}catch(err){alert('Failed to add movie');}};const handleUpdateMovie=async(id,movieData)=>{try{const updatedMovie=await updateMovie(id,movieData);setMovies(movies.map(m=>m.id===id?updatedMovie:m));setIsFormOpen(false);setMovieToEdit(null);}catch(err){alert('Failed to update movie');}};const handleDeleteMovie=async id=>{if(window.confirm('Are you sure you want to delete this movie?')){try{await deleteMovie(id);setMovies(movies.filter(m=>m.id!==id));}catch(err){alert('Failed to delete movie');}}};const handleRatingChange=async(id,newRating)=>{try{await updateRating(id,newRating);setMovies(movies.map(m=>m.id===id?_objectSpread(_objectSpread({},m),{},{rating:newRating}):m));}catch(err){alert('Failed to update rating');}};// NEW: Remove all ratings function\nconst handleRemoveRatings=async()=>{if(window.confirm('Are you sure you want to remove all ratings? This will set all movie ratings to 0.')){try{// Update all movies to have rating 0\nconst updatePromises=movies.map(movie=>updateRating(movie.id,0));await Promise.all(updatePromises);// Update local state\nsetMovies(movies.map(m=>_objectSpread(_objectSpread({},m),{},{rating:0})));alert('All ratings have been removed successfully!');}catch(err){alert('Failed to remove ratings');}}};const handleEdit=movie=>{setMovieToEdit(movie);setIsFormOpen(true);};const handleFormClose=()=>{setIsFormOpen(false);setMovieToEdit(null);};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading movies...\"});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"error-page\",children:error});}return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(Header,{totalMovies:movies.length,averageRating:averageRating,onAddClick:()=>setIsFormOpen(true),onRemoveRatings:handleRemoveRatings}),/*#__PURE__*/_jsx(MovieList,{movies:movies,onEdit:handleEdit,onDelete:handleDeleteMovie,onRatingChange:handleRatingChange}),isFormOpen&&/*#__PURE__*/_jsx(MovieForm,{movie:movieToEdit,onSubmit:movieToEdit?handleUpdateMovie:handleAddMovie,onCancel:handleFormClose})]});}export default App;","map":{"version":3,"names":["useState","useEffect","Header","MovieList","MovieForm","fetchMovies","addMovie","updateMovie","deleteMovie","updateRating","jsx","_jsx","jsxs","_jsxs","App","movies","setMovies","loading","setLoading","error","setError","isFormOpen","setIsFormOpen","movieToEdit","setMovieToEdit","loadMovies","data","err","averageRating","length","reduce","sum","movie","rating","toFixed","handleAddMovie","movieData","newMovie","alert","handleUpdateMovie","id","updatedMovie","map","m","handleDeleteMovie","window","confirm","filter","handleRatingChange","newRating","_objectSpread","handleRemoveRatings","updatePromises","Promise","all","handleEdit","handleFormClose","className","children","totalMovies","onAddClick","onRemoveRatings","onEdit","onDelete","onRatingChange","onSubmit","onCancel"],"sources":["C:/Users/sham/Desktop/movies-app/src/App.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport Header from './components/Header';\nimport MovieList from './components/MovieList';\nimport MovieForm from './components/MovieForm';\nimport { fetchMovies, addMovie, updateMovie, deleteMovie, updateRating } from './services/movieService';\nimport './styles/App.css';\n\nfunction App() {\n  const [movies, setMovies] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [isFormOpen, setIsFormOpen] = useState(false);\n  const [movieToEdit, setMovieToEdit] = useState(null);\n\n  useEffect(() => {\n    loadMovies();\n  }, []);\n\n  const loadMovies = async () => {\n    try {\n      setLoading(true);\n      const data = await fetchMovies();\n      setMovies(data);\n      setError(null);\n    } catch (err) {\n      setError('Failed to load movies. Please make sure JSON server is running.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const averageRating = movies.length > 0\n    ? (movies.reduce((sum, movie) => sum + movie.rating, 0) / movies.length).toFixed(1)\n    : 0;\n\n  const handleAddMovie = async (movieData) => {\n    try {\n      const newMovie = await addMovie(movieData);\n      setMovies([...movies, newMovie]);\n      setIsFormOpen(false);\n    } catch (err) {\n      alert('Failed to add movie');\n    }\n  };\n\n  const handleUpdateMovie = async (id, movieData) => {\n    try {\n      const updatedMovie = await updateMovie(id, movieData);\n      setMovies(movies.map(m => m.id === id ? updatedMovie : m));\n      setIsFormOpen(false);\n      setMovieToEdit(null);\n    } catch (err) {\n      alert('Failed to update movie');\n    }\n  };\n\n  const handleDeleteMovie = async (id) => {\n    if (window.confirm('Are you sure you want to delete this movie?')) {\n      try {\n        await deleteMovie(id);\n        setMovies(movies.filter(m => m.id !== id));\n      } catch (err) {\n        alert('Failed to delete movie');\n      }\n    }\n  };\n\n  const handleRatingChange = async (id, newRating) => {\n    try {\n      await updateRating(id, newRating);\n      setMovies(movies.map(m => m.id === id ? { ...m, rating: newRating } : m));\n    } catch (err) {\n      alert('Failed to update rating');\n    }\n  };\n\n  // NEW: Remove all ratings function\n  const handleRemoveRatings = async () => {\n    if (window.confirm('Are you sure you want to remove all ratings? This will set all movie ratings to 0.')) {\n      try {\n        // Update all movies to have rating 0\n        const updatePromises = movies.map(movie => \n          updateRating(movie.id, 0)\n        );\n        \n        await Promise.all(updatePromises);\n        \n        // Update local state\n        setMovies(movies.map(m => ({ ...m, rating: 0 })));\n        \n        alert('All ratings have been removed successfully!');\n      } catch (err) {\n        alert('Failed to remove ratings');\n      }\n    }\n  };\n\n  const handleEdit = (movie) => {\n    setMovieToEdit(movie);\n    setIsFormOpen(true);\n  };\n\n  const handleFormClose = () => {\n    setIsFormOpen(false);\n    setMovieToEdit(null);\n  };\n\n  if (loading) {\n    return <div className=\"loading\">Loading movies...</div>;\n  }\n\n  if (error) {\n    return <div className=\"error-page\">{error}</div>;\n  }\n\n  return (\n    <div className=\"app\">\n      <Header \n        totalMovies={movies.length}\n        averageRating={averageRating}\n        onAddClick={() => setIsFormOpen(true)}\n        onRemoveRatings={handleRemoveRatings}\n      />\n      \n      <MovieList \n        movies={movies}\n        onEdit={handleEdit}\n        onDelete={handleDeleteMovie}\n        onRatingChange={handleRatingChange}\n      />\n\n      {isFormOpen && (\n        <MovieForm\n          movie={movieToEdit}\n          onSubmit={movieToEdit ? handleUpdateMovie : handleAddMovie}\n          onCancel={handleFormClose}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}